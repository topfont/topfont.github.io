{"version":3,"sources":["FontCard.tsx","Topfont.tsx","App.tsx","index.tsx"],"names":["FontCard","props","onClick","style","userSelect","cursor","width","height","display","alignItems","justifyContent","fontSize","borderRadius","background","boxShadow","margin","border","color","fontFamily","font","letter","Topfont","text","split","map","x","i","topfont","alphabet","getRandomLetter","Math","random","length","fonts","getRandomFontPair","a","b","App","useState","window","localStorage","getItem","answeredQuestions","setAnsweredQuestions","currentLetter","setCurrentLetter","isLoading","setIsLoading","showTopfont","setShowTopfont","votes","setVotes","currentFontPair","setCurrentFontPair","vote","old","value","setItem","fetch","process","API_BASE_URL","method","headers","body","JSON","stringify","entries","entry","Object","sort","undefined","fromEntries","className","padding","href","textDecoration","fontWeight","opacity","paddingLeft","paddingRight","paddingTop","paddingBottom","maxWidth","marginBottom","lineHeight","e","preventDefault","response","json","marginTop","textAlign","fontVariantNumeric","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f739b6eb.chunk.js","sourcesContent":["export const FontCard: React.FC<{\n  letter: string;\n  font: string;\n  onClick: () => void;\n}> = (props) => {\n  return (\n    <button\n      onClick={props.onClick}\n      style={{\n        userSelect: \"none\",\n        cursor: \"pointer\",\n        width: 128,\n        height: 128,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: 64,\n        borderRadius: 8,\n        background: \"white\",\n        boxShadow: \"0px 2px 4px rgba(0, 0, 0, 0.06)\",\n        margin: 8,\n        border: 0,\n        color: \"#502824\",\n        fontFamily: props.font,\n      }}\n    >\n      {props.letter}\n    </button>\n  );\n};\n","export const Topfont: React.FC<{ text: string; topfont: any }> = (props) => (\n  <>\n    {props.text.split(\"\").map((x, i) => (\n      <span key={i} style={{ fontFamily: props.topfont[x] }}>\n        {x}\n      </span>\n    ))}\n  </>\n);\n","import React, { useState } from \"react\";\nimport { FontCard } from \"./FontCard\";\nimport { Topfont } from \"./Topfont\";\nimport \"./App.css\";\n\nconst alphabet = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nfunction getRandomLetter() {\n  return alphabet[(Math.random() * alphabet.length) | 0];\n}\n\nconst fonts: string[] = [\n  \"Arial\",\n  \"Verdana\",\n  \"Helvetica\",\n  \"Tahoma\",\n  \"Trebuchet MS\",\n  \"Times New Roman\",\n  \"Georgia\",\n  \"Garamond\",\n  \"Courier New\",\n  \"Brush Script MT\",\n  \"Abril Fatface\",\n  \"Alfa Slab One\",\n  \"Balsamiq Sans\",\n  \"Bebas Neue\",\n  \"Cabin Sketch\",\n  \"Comfortaa\",\n  \"Concert One\",\n  \"Fredericka the Great\",\n  \"Frijole\",\n  \"Graduate\",\n  \"Lobster\",\n  \"Monoton\",\n  \"Press Start 2P\",\n  \"Righteous\",\n  \"Roboto\",\n  \"Staatliches\",\n  \"UnifrakturMaguntia\",\n];\nfunction getRandomFontPair() {\n  const a = (Math.random() * fonts.length) | 0;\n  let b = a;\n  while (b === a) {\n    b = (Math.random() * fonts.length) | 0;\n  }\n  return [fonts[a], fonts[b]];\n}\n\nfunction App() {\n  const [answeredQuestions, setAnsweredQuestions] = useState(\n    +(window.localStorage.getItem(\"voteCount\") || 0) || 0\n  );\n  const [currentLetter, setCurrentLetter] = useState(getRandomLetter());\n  const [isLoading, setIsLoading] = useState(false);\n  const [showTopfont, setShowTopfont] = useState(false);\n  const [votes, setVotes] = useState<any>(null);\n  const [currentFontPair, setCurrentFontPair] = useState(getRandomFontPair());\n\n  const vote = async (letter: string, font: string) => {\n    setIsLoading(true);\n    setAnsweredQuestions((old) => {\n      const value = old + 1;\n      window.localStorage.setItem(\"voteCount\", \"\" + value);\n      return value;\n    });\n    try {\n      await fetch(`${process.env.API_BASE_URL}vote/`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          letter,\n          font,\n        }),\n      });\n    } catch {\n    } finally {\n      setIsLoading(false);\n      setCurrentLetter(getRandomLetter());\n      setCurrentFontPair(getRandomFontPair());\n    }\n  };\n\n  let topfont = null;\n  if (votes && votes !== \"loading\") {\n    const entries = alphabet.split(\"\").map((x) => [x, votes[x] || {}]);\n    for (const entry of entries) {\n      //@ts-expect-error\n      const font = Object.entries(entry[1]).sort((a, b) => a[1] - b[1])[0];\n      entry[1] = font ? font[0] : undefined;\n    }\n    topfont = Object.fromEntries(entries);\n  }\n\n  return (\n    <div className=\"App\">\n      <div\n        style={{\n          fontSize: 22,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          color: \"white\",\n          background: \"#502824\",\n          padding: 16,\n        }}\n      >\n        <a href=\"/\" style={{ color: \"white\", textDecoration: \"none\" }}>\n          <span style={{ fontWeight: \"bold\" }}>topfont</span>\n          <span style={{ opacity: 0.5 }}>.github.io</span>\n        </a>\n      </div>\n      <div\n        style={{\n          paddingLeft: 32,\n          paddingRight: 32,\n          paddingTop: 16,\n          paddingBottom: 16,\n          margin: \"0 auto\",\n          maxWidth: 450,\n        }}\n      >\n        <p style={{ marginBottom: 32, lineHeight: 1.5 }}>\n          <a href=\"https://github.com/topfont/topfont.github.io\">\n            {\" \"}\n            Topfont (GitHub)\n          </a>{\" \"}\n          is a community-sourced project to find the best combination font, the{\" \"}\n          <b>Topfont</b>. It works by pitting glyphs from various fonts against\n          eachother 1-on-1, and synthesises a whole new font that uses the most\n          popular letter glyph across all fonts for each letter.\n        </p>\n\n        <p>\n          {!showTopfont ? (\n            <a\n              href=\"/topfont\"\n              onClick={async (e) => {\n                e.preventDefault();\n                setShowTopfont(true);\n                setVotes(\"loading\");\n                try {\n                  const response = await fetch(\"\" + process.env.API_BASE_URL);\n                  const votes = await response.json();\n                  setVotes(votes);\n                } catch {\n                  setVotes(null);\n                  setShowTopfont(false);\n                }\n              }}\n            >\n              View the Topfont in all it's glory.\n            </a>\n          ) : (\n            <a\n              href=\"/\"\n              onClick={(e) => {\n                e.preventDefault();\n                setShowTopfont(false);\n              }}\n            >\n              Continue voting for glyphs.\n            </a>\n          )}\n        </p>\n        {showTopfont ? (\n          <div\n            style={{\n              marginTop: 32,\n              fontSize: 24,\n              background: \"white\",\n              paddingTop: 1,\n              paddingBottom: 1,\n              paddingLeft: 32,\n              paddingRight: 32,\n              lineHeight: 1.25,\n              borderRadius: 8,\n            }}\n          >\n            {votes === \"loading\" ? (\n              \"\"\n            ) : (\n              <div>\n                <p>\n                  <Topfont\n                    text=\"Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz\"\n                    topfont={topfont}\n                  />\n                </p>\n                <p>\n                  <Topfont\n                    text=\"The quick brown fox jumps over the lazy dog.\"\n                    topfont={topfont}\n                  />\n                </p>\n              </div>\n            )}\n          </div>\n        ) : (\n          <>\n            <div\n              style={{\n                fontWeight: \"bold\",\n                fontSize: 22,\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                marginBottom: 32,\n                marginTop: 64,\n                color: \"#502824\",\n              }}\n            >\n              Which looks nicer?\n            </div>\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                height: 128,\n              }}\n            >\n              {!isLoading && (\n                <>\n                  <FontCard\n                    letter={currentLetter}\n                    font={currentFontPair[0]}\n                    onClick={() => {\n                      vote(currentLetter, currentFontPair[0]);\n                    }}\n                  />\n                  <FontCard\n                    letter={currentLetter}\n                    font={currentFontPair[1]}\n                    onClick={() => {\n                      vote(currentLetter, currentFontPair[1]);\n                    }}\n                  />\n                </>\n              )}\n            </div>\n\n            {answeredQuestions > 0 && (\n              <div style={{ marginTop: 32, textAlign: \"center\" }}>\n                You have voted on{\" \"}\n                <span style={{ fontVariantNumeric: \"tabular-nums\" }}>\n                  {answeredQuestions}\n                </span>{\" \"}\n                fonts. {answeredQuestions > 20 && \" Nice!\"}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}